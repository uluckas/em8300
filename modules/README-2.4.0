The Makefile is now defaulted to kernel 2.4.x
All that is necessary is the following:

make
make install

If your kernel sources are in a location other than /usr/src/linux
you need to modify the second line of the Makefile.  If you need
to build with a compiler other than gcc (i.e. kgcc), modify line 8.



(the following is kept for reference until the new Makefile is fully tested)

To compile the modules under 2.4.x kernels you will need to run the script:
	./make-modules-2.4

NOTE: You need at least kernel 2.4.0. The 2.4.0-testXYZ series kernels are 
reported to fail (nothing is compiled at all). So if you are running a -test
kernel and have problems compiling the modules please upgrade to 2.4.0 proper
and see if they go away. If not let me know (email at bottom of this file).

If your kernel sources are not in /usr/src/linux then edit the make-modules-2.4
script at the top to change where the correct location is.

Also, if you are not executing the script from within your em8300/modules
directory, you will, again, need to edit the script and change the
EM_LOCATION=`pwd` to EM_LOCATION=/whatever/your/path/is/em8300/modules.

Now run the script and if all goes well, you should find the compiled modules
in your em8300/modules directory! (-:

For this to work you need to have configured your kernel and done a make dep,
before running the script. (A make bzImage and make modules is not necessary
but since the modules need to be compiled for the same kernel that they will
be used under it doesn't make sense not to have done a make bzImage (or
equivalent) and a make modules at least at some point in the past...)

If you want to install the modules in your standard module installation 
directory then run the script:
	./make-install-2.4

Again you need to apply the above mentioned modifications to the top of the 
script first, if necessary.

And finally there is a make-clean script which cleans up the em8300/modules
directory (no need to edit this).

Let me know if you have any problems using the scripts...

I verified it to work fine on kernels 2.4.0-ac9 and -ac10.

Anton Altaparmakov <aia21@cam.ac.uk>

